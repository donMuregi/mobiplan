module.exports=[94894,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(71987),e=a.i(38246),f=a.i(50944),g=a.i(50522),h=a.i(13749);let i=(0,a.i(70106).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var j=a.i(1631),k=a.i(33441),l=a.i(96221),m=a.i(60115),n=a.i(74625),o=a.i(68114),p=a.i(19032);function q(){(0,f.useRouter)();let{cart:a,clearCart:q}=(0,m.useCartStore)(),{user:r,isAuthenticated:s}=(0,n.useAuthStore)(),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",county:"",postalCode:"",notes:"",paymentMethod:"mpesa"});(0,c.useEffect)(()=>{u(!0)},[]),(0,c.useEffect)(()=>{s&&r&&E(a=>({...a,firstName:r.first_name||"",lastName:r.last_name||"",email:r.email||"",phone:r.phone||"",address:r.address||"",city:r.city||"",county:r.county||"",postalCode:r.postal_code||""}))},[s,r]);let F=a=>{let{name:b,value:c}=a.target;E(a=>({...a,[b]:c}))},G=async a=>{a.preventDefault(),w(!0);try{let a={first_name:D.firstName,last_name:D.lastName,email:D.email,phone:D.phone,shipping_address:D.address,shipping_city:D.city,shipping_county:D.county,shipping_postal_code:D.postalCode,customer_notes:D.notes,payment_method:D.paymentMethod},b=await p.api.post("/orders/checkout/",a);C(b.data.order_number),A(!0),q()}catch(a){console.error("Checkout error:",a),alert("There was an error processing your order. Please try again.")}finally{w(!1)}},H=a?.items||[],I=a?.total||0,J=I>1e4?0:500,K=I+J;return t?0!==H.length||z?z?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,b.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-8 text-center shadow-sm",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(k.Check,{className:"h-10 w-10 text-green-600"})}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Order Confirmed!"}),(0,b.jsx)("p",{className:"text-gray-600 mb-2",children:"Thank you for your order."}),(0,b.jsxs)("p",{className:"text-lg font-medium text-gray-900 mb-8",children:["Order Number: ",(0,b.jsx)("span",{className:"text-primary",children:B})]}),(0,b.jsxs)("p",{className:"text-gray-500 mb-8",children:["We've sent a confirmation email to ",(0,b.jsx)("strong",{children:D.email})," with your order details."]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,b.jsx)(e.default,{href:"/shop",className:"px-8 py-3 bg-primary text-white rounded-full font-medium hover:bg-primary-dark",children:"Continue Shopping"}),(0,b.jsx)(e.default,{href:s?"/account?tab=orders":"/",className:"px-8 py-3 border border-gray-300 text-gray-700 rounded-full font-medium hover:bg-gray-50",children:s?"View Orders":"Back to Home"})]})]})})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("nav",{className:"flex items-center text-sm text-gray-500 mb-8",children:[(0,b.jsx)(e.default,{href:"/",className:"hover:text-gray-700",children:"Home"}),(0,b.jsx)(g.ChevronRight,{className:"h-4 w-4 mx-2"}),(0,b.jsx)(e.default,{href:"/cart",className:"hover:text-gray-700",children:"Cart"}),(0,b.jsx)(g.ChevronRight,{className:"h-4 w-4 mx-2"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium",children:"Checkout"})]}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),(0,b.jsx)("div",{className:"flex items-center justify-center mb-12",children:[{step:1,label:"Shipping"},{step:2,label:"Payment"},{step:3,label:"Review"}].map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:`flex items-center justify-center w-10 h-10 rounded-full font-medium ${x>=a.step?"bg-primary text-white":"bg-gray-200 text-gray-500"}`,children:x>a.step?(0,b.jsx)(k.Check,{className:"h-5 w-5"}):a.step}),(0,b.jsx)("span",{className:`ml-2 text-sm font-medium ${x>=a.step?"text-gray-900":"text-gray-500"}`,children:a.label}),c<2&&(0,b.jsx)("div",{className:`w-20 h-1 mx-4 ${x>a.step?"bg-primary":"bg-gray-200"}`})]},a.step))}),(0,b.jsx)("form",{onSubmit:G,children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[1===x&&(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-6",children:"Shipping Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,b.jsx)("input",{type:"text",name:"firstName",value:D.firstName,onChange:F,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,b.jsx)("input",{type:"text",name:"lastName",value:D.lastName,onChange:F,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,b.jsx)("input",{type:"email",name:"email",value:D.email,onChange:F,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone *"}),(0,b.jsx)("input",{type:"tel",name:"phone",value:D.phone,onChange:F,required:!0,placeholder:"0712345678",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,b.jsx)("input",{type:"text",name:"address",value:D.address,onChange:F,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,b.jsx)("input",{type:"text",name:"city",value:D.city,onChange:F,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"County *"}),(0,b.jsxs)("select",{name:"county",value:D.county,onChange:F,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"",children:"Select County"}),(0,b.jsx)("option",{value:"Nairobi",children:"Nairobi"}),(0,b.jsx)("option",{value:"Mombasa",children:"Mombasa"}),(0,b.jsx)("option",{value:"Kisumu",children:"Kisumu"}),(0,b.jsx)("option",{value:"Nakuru",children:"Nakuru"}),(0,b.jsx)("option",{value:"Eldoret",children:"Eldoret"}),(0,b.jsx)("option",{value:"Kiambu",children:"Kiambu"}),(0,b.jsx)("option",{value:"Machakos",children:"Machakos"}),(0,b.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,b.jsx)("div",{className:"mt-6 flex justify-end",children:(0,b.jsx)("button",{type:"button",onClick:()=>y(2),className:"px-8 py-3 bg-primary text-white rounded-full font-medium hover:bg-primary-dark",children:"Continue to Payment"})})]}),2===x&&(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-6",children:"Payment Method"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${"mpesa"===D.paymentMethod?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[(0,b.jsx)("input",{type:"radio",name:"paymentMethod",value:"mpesa",checked:"mpesa"===D.paymentMethod,onChange:F,className:"sr-only"}),(0,b.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4",children:(0,b.jsx)(j.Smartphone,{className:"h-6 w-6 text-green-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:"M-Pesa"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Pay with M-Pesa mobile money"})]}),"mpesa"===D.paymentMethod&&(0,b.jsx)(k.Check,{className:"h-5 w-5 text-primary"})]}),(0,b.jsxs)("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${"card"===D.paymentMethod?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[(0,b.jsx)("input",{type:"radio",name:"paymentMethod",value:"card",checked:"card"===D.paymentMethod,onChange:F,className:"sr-only"}),(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4",children:(0,b.jsx)(i,{className:"h-6 w-6 text-blue-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:"Card Payment"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Pay with Visa, Mastercard"})]}),"card"===D.paymentMethod&&(0,b.jsx)(k.Check,{className:"h-5 w-5 text-primary"})]}),(0,b.jsxs)("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${"cash"===D.paymentMethod?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[(0,b.jsx)("input",{type:"radio",name:"paymentMethod",value:"cash",checked:"cash"===D.paymentMethod,onChange:F,className:"sr-only"}),(0,b.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mr-4",children:(0,b.jsx)("span",{className:"text-xl",children:"ðŸ’µ"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:"Cash on Delivery"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Pay when you receive your order"})]}),"cash"===D.paymentMethod&&(0,b.jsx)(k.Check,{className:"h-5 w-5 text-primary"})]})]}),(0,b.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>y(1),className:"flex items-center px-6 py-3 text-gray-600 hover:text-gray-900",children:[(0,b.jsx)(h.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Back"]}),(0,b.jsx)("button",{type:"button",onClick:()=>y(3),className:"px-8 py-3 bg-primary text-white rounded-full font-medium hover:bg-primary-dark",children:"Review Order"})]})]}),3===x&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Shipping Details"}),(0,b.jsxs)("div",{className:"text-gray-600",children:[(0,b.jsxs)("p",{className:"font-medium text-gray-900",children:[D.firstName," ",D.lastName]}),(0,b.jsx)("p",{children:D.address}),(0,b.jsxs)("p",{children:[D.city,", ",D.county]}),(0,b.jsx)("p",{children:D.phone}),(0,b.jsx)("p",{children:D.email})]}),(0,b.jsx)("button",{type:"button",onClick:()=>y(1),className:"mt-4 text-primary text-sm font-medium hover:underline",children:"Edit"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Payment Method"}),(0,b.jsx)("p",{className:"text-gray-600 capitalize",children:"mpesa"===D.paymentMethod?"M-Pesa":D.paymentMethod}),(0,b.jsx)("button",{type:"button",onClick:()=>y(2),className:"mt-4 text-primary text-sm font-medium hover:underline",children:"Edit"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Order Notes (Optional)"}),(0,b.jsx)("textarea",{name:"notes",value:D.notes,onChange:F,rows:3,placeholder:"Any special instructions for delivery...",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>y(2),className:"flex items-center px-6 py-3 text-gray-600 hover:text-gray-900",children:[(0,b.jsx)(h.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Back"]}),(0,b.jsx)("button",{type:"submit",disabled:v,className:"px-8 py-3 bg-primary text-white rounded-full font-medium hover:bg-primary-dark disabled:opacity-50 flex items-center",children:v?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Place Order â€¢ ${(0,o.formatPrice)(K)}`})]})]})]}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm sticky top-24",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),(0,b.jsx)("div",{className:"space-y-4 mb-6",children:H.map(a=>(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"relative w-16 h-16 bg-gray-50 rounded-lg flex-shrink-0",children:(0,b.jsx)(d.default,{src:(0,o.getImageUrl)(a.product.main_image),alt:a.product.name,fill:!0,className:"object-contain p-1",unoptimized:!0})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.product.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Qty: ",a.quantity]}),(0,b.jsx)("p",{className:"text-sm font-medium",children:(0,o.formatPrice)(a.subtotal)})]})]},a.id))}),(0,b.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,b.jsx)("span",{children:(0,o.formatPrice)(I)})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,b.jsx)("span",{children:0===J?"Free":(0,o.formatPrice)(J)})]}),(0,b.jsxs)("div",{className:"flex justify-between text-lg font-semibold pt-2 border-t",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsx)("span",{children:(0,o.formatPrice)(K)})]})]})]})})]})})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Your cart is empty"}),(0,b.jsx)("p",{className:"text-gray-500 mb-8",children:"Add some products before checking out."}),(0,b.jsx)(e.default,{href:"/shop",className:"px-8 py-3 bg-primary text-white rounded-full font-medium hover:bg-primary-dark",children:"Continue Shopping"})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,b.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,b.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})})})}a.s(["default",()=>q],94894)}];

//# sourceMappingURL=src_app_checkout_page_tsx_3300a33b._.js.map