(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26707,e=>{"use strict";let s=(0,e.i(75254).default)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);e.s(["Smartphone",()=>s],26707)},31278,e=>{"use strict";let s=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},63059,e=>{"use strict";let s=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>s],63059)},43531,e=>{"use strict";let s=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>s],43531)},73375,e=>{"use strict";let s=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>s],73375)},69439,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(57688),r=e.i(22016),l=e.i(18566),i=e.i(63059),n=e.i(73375);let d=(0,e.i(75254).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var c=e.i(26707),m=e.i(43531),o=e.i(31278),x=e.i(9666),h=e.i(35960),u=e.i(75157),p=e.i(9165);function y(){(0,l.useRouter)();let{cart:e,clearCart:y}=(0,x.useCartStore)(),{user:g,isAuthenticated:f}=(0,h.useAuthStore)(),[j,b]=(0,a.useState)(!1),[N,v]=(0,a.useState)(!1),[w,k]=(0,a.useState)(1),[C,M]=(0,a.useState)(!1),[P,S]=(0,a.useState)(""),[_,O]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",county:"",postalCode:"",notes:"",paymentMethod:"mpesa"});(0,a.useEffect)(()=>{b(!0)},[]),(0,a.useEffect)(()=>{f&&g&&O(e=>({...e,firstName:g.first_name||"",lastName:g.last_name||"",email:g.email||"",phone:g.phone||"",address:g.address||"",city:g.city||"",county:g.county||"",postalCode:g.postal_code||""}))},[f,g]);let q=e=>{let{name:s,value:a}=e.target;O(e=>({...e,[s]:a}))},R=async e=>{e.preventDefault(),v(!0);try{let e={first_name:_.firstName,last_name:_.lastName,email:_.email,phone:_.phone,shipping_address:_.address,shipping_city:_.city,shipping_county:_.county,shipping_postal_code:_.postalCode,customer_notes:_.notes,payment_method:_.paymentMethod},s=await p.api.post("/orders/checkout/",e);S(s.data.order_number),M(!0),y()}catch(e){console.error("Checkout error:",e),alert("There was an error processing your order. Please try again.")}finally{v(!1)}},E=e?.items||[],T=e?.total||0,$=T>1e4?0:500,A=T+$;return j?0!==E.length||C?C?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,s.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-8 text-center shadow-sm",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(m.Check,{className:"h-10 w-10 text-green-600"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Order Confirmed!"}),(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"Thank you for your order."}),(0,s.jsxs)("p",{className:"text-lg font-medium text-gray-900 mb-8",children:["Order Number: ",(0,s.jsx)("span",{className:"text-primary",children:P})]}),(0,s.jsxs)("p",{className:"text-gray-500 mb-8",children:["We've sent a confirmation email to ",(0,s.jsx)("strong",{children:_.email})," with your order details."]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,s.jsx)(r.default,{href:"/shop",className:"px-8 py-3 bg-primary text-white rounded-full font-medium hover:bg-primary-dark",children:"Continue Shopping"}),(0,s.jsx)(r.default,{href:f?"/account?tab=orders":"/",className:"px-8 py-3 border border-gray-300 text-gray-700 rounded-full font-medium hover:bg-gray-50",children:f?"View Orders":"Back to Home"})]})]})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("nav",{className:"flex items-center text-sm text-gray-500 mb-8",children:[(0,s.jsx)(r.default,{href:"/",className:"hover:text-gray-700",children:"Home"}),(0,s.jsx)(i.ChevronRight,{className:"h-4 w-4 mx-2"}),(0,s.jsx)(r.default,{href:"/cart",className:"hover:text-gray-700",children:"Cart"}),(0,s.jsx)(i.ChevronRight,{className:"h-4 w-4 mx-2"}),(0,s.jsx)("span",{className:"text-gray-900 font-medium",children:"Checkout"})]}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),(0,s.jsx)("div",{className:"flex items-center justify-center mb-12",children:[{step:1,label:"Shipping"},{step:2,label:"Payment"},{step:3,label:"Review"}].map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:`flex items-center justify-center w-10 h-10 rounded-full font-medium ${w>=e.step?"bg-primary text-white":"bg-gray-200 text-gray-500"}`,children:w>e.step?(0,s.jsx)(m.Check,{className:"h-5 w-5"}):e.step}),(0,s.jsx)("span",{className:`ml-2 text-sm font-medium ${w>=e.step?"text-gray-900":"text-gray-500"}`,children:e.label}),a<2&&(0,s.jsx)("div",{className:`w-20 h-1 mx-4 ${w>e.step?"bg-primary":"bg-gray-200"}`})]},e.step))}),(0,s.jsx)("form",{onSubmit:R,children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[1===w&&(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-6",children:"Shipping Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,s.jsx)("input",{type:"text",name:"firstName",value:_.firstName,onChange:q,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,s.jsx)("input",{type:"text",name:"lastName",value:_.lastName,onChange:q,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,s.jsx)("input",{type:"email",name:"email",value:_.email,onChange:q,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone *"}),(0,s.jsx)("input",{type:"tel",name:"phone",value:_.phone,onChange:q,required:!0,placeholder:"0712345678",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,s.jsx)("input",{type:"text",name:"address",value:_.address,onChange:q,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,s.jsx)("input",{type:"text",name:"city",value:_.city,onChange:q,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"County *"}),(0,s.jsxs)("select",{name:"county",value:_.county,onChange:q,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"",children:"Select County"}),(0,s.jsx)("option",{value:"Nairobi",children:"Nairobi"}),(0,s.jsx)("option",{value:"Mombasa",children:"Mombasa"}),(0,s.jsx)("option",{value:"Kisumu",children:"Kisumu"}),(0,s.jsx)("option",{value:"Nakuru",children:"Nakuru"}),(0,s.jsx)("option",{value:"Eldoret",children:"Eldoret"}),(0,s.jsx)("option",{value:"Kiambu",children:"Kiambu"}),(0,s.jsx)("option",{value:"Machakos",children:"Machakos"}),(0,s.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)("button",{type:"button",onClick:()=>k(2),className:"px-8 py-3 bg-primary text-white rounded-full font-medium hover:bg-primary-dark",children:"Continue to Payment"})})]}),2===w&&(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-6",children:"Payment Method"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${"mpesa"===_.paymentMethod?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[(0,s.jsx)("input",{type:"radio",name:"paymentMethod",value:"mpesa",checked:"mpesa"===_.paymentMethod,onChange:q,className:"sr-only"}),(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4",children:(0,s.jsx)(c.Smartphone,{className:"h-6 w-6 text-green-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"M-Pesa"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Pay with M-Pesa mobile money"})]}),"mpesa"===_.paymentMethod&&(0,s.jsx)(m.Check,{className:"h-5 w-5 text-primary"})]}),(0,s.jsxs)("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${"card"===_.paymentMethod?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[(0,s.jsx)("input",{type:"radio",name:"paymentMethod",value:"card",checked:"card"===_.paymentMethod,onChange:q,className:"sr-only"}),(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4",children:(0,s.jsx)(d,{className:"h-6 w-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Card Payment"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Pay with Visa, Mastercard"})]}),"card"===_.paymentMethod&&(0,s.jsx)(m.Check,{className:"h-5 w-5 text-primary"})]}),(0,s.jsxs)("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${"cash"===_.paymentMethod?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[(0,s.jsx)("input",{type:"radio",name:"paymentMethod",value:"cash",checked:"cash"===_.paymentMethod,onChange:q,className:"sr-only"}),(0,s.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mr-4",children:(0,s.jsx)("span",{className:"text-xl",children:"ðŸ’µ"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Cash on Delivery"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Pay when you receive your order"})]}),"cash"===_.paymentMethod&&(0,s.jsx)(m.Check,{className:"h-5 w-5 text-primary"})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>k(1),className:"flex items-center px-6 py-3 text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(n.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Back"]}),(0,s.jsx)("button",{type:"button",onClick:()=>k(3),className:"px-8 py-3 bg-primary text-white rounded-full font-medium hover:bg-primary-dark",children:"Review Order"})]})]}),3===w&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Shipping Details"}),(0,s.jsxs)("div",{className:"text-gray-600",children:[(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:[_.firstName," ",_.lastName]}),(0,s.jsx)("p",{children:_.address}),(0,s.jsxs)("p",{children:[_.city,", ",_.county]}),(0,s.jsx)("p",{children:_.phone}),(0,s.jsx)("p",{children:_.email})]}),(0,s.jsx)("button",{type:"button",onClick:()=>k(1),className:"mt-4 text-primary text-sm font-medium hover:underline",children:"Edit"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Payment Method"}),(0,s.jsx)("p",{className:"text-gray-600 capitalize",children:"mpesa"===_.paymentMethod?"M-Pesa":_.paymentMethod}),(0,s.jsx)("button",{type:"button",onClick:()=>k(2),className:"mt-4 text-primary text-sm font-medium hover:underline",children:"Edit"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Order Notes (Optional)"}),(0,s.jsx)("textarea",{name:"notes",value:_.notes,onChange:q,rows:3,placeholder:"Any special instructions for delivery...",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>k(2),className:"flex items-center px-6 py-3 text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(n.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Back"]}),(0,s.jsx)("button",{type:"submit",disabled:N,className:"px-8 py-3 bg-primary text-white rounded-full font-medium hover:bg-primary-dark disabled:opacity-50 flex items-center",children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Place Order â€¢ ${(0,u.formatPrice)(A)}`})]})]})]}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm sticky top-24",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),(0,s.jsx)("div",{className:"space-y-4 mb-6",children:E.map(e=>(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"relative w-16 h-16 bg-gray-50 rounded-lg flex-shrink-0",children:(0,s.jsx)(t.default,{src:(0,u.getImageUrl)(e.product.main_image),alt:e.product.name,fill:!0,className:"object-contain p-1",unoptimized:!0})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.product.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Qty: ",e.quantity]}),(0,s.jsx)("p",{className:"text-sm font-medium",children:(0,u.formatPrice)(e.subtotal)})]})]},e.id))}),(0,s.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,s.jsx)("span",{children:(0,u.formatPrice)(T)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,s.jsx)("span",{children:0===$?"Free":(0,u.formatPrice)($)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-lg font-semibold pt-2 border-t",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsx)("span",{children:(0,u.formatPrice)(A)})]})]})]})})]})})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-gray-500 mb-8",children:"Add some products before checking out."}),(0,s.jsx)(r.default,{href:"/shop",className:"px-8 py-3 bg-primary text-white rounded-full font-medium hover:bg-primary-dark",children:"Continue Shopping"})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,s.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})})})}e.s(["default",()=>y],69439)}]);